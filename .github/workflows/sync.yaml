name: Sync on Push

on:
  push:
    paths:
      - 'modules/script-hub.surge.sgmodule'

jobs:

  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v2
      with:
        fetch-depth: 0

    - name: Sync Files
      run: |
        git remote add source https://github.com/Script-Hub-Org/Script-Hub.git
        git fetch source
        git checkout source/main -- modules/script-hub.surge.sgmodule
        git add <path_to_files>
        git commit -m "Sync files from Script-Hub.git"
        git push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
